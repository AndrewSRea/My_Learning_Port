<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Number Guessing Game</title>
        <style>
            html {
                font-family: sans-serif;
            }
      
            body {
                width: 50%;
                max-width: 800px;
                min-width: 480px;
                margin: 0 auto;
            }
      
            .lastResult {
                color: white;
                padding: 3px;
            }
        </style>
    </head>
    <body>
        <!-- *** Please see my comments about how the JavaScript below works just below the JavaScript opening <script> tag. *** -->

        <h1>Number guessing game</h1>

        <p>We have selected a random number between 1 and 100. See if you can guess it in 10 turns or fewer. We'll tell you if your guess was too high or too low.</p>
    
        <div class="form">
            <label for="guessField">Enter a guess: </label>
            <input type="text" id="guessField" class="guessField">
            <input type="submit" value="Submit guess" class="guessSubmit">
        </div>
    
        <div class="resultParas">
            <p class="guesses"></p>
            <p class="lastResult"></p>
            <p class="lowOrHi"></p>
        </div>
    
        <script>
            /* I am going to attempt to describe what is happening with the JavaScript here line by line, and how it is affecting
               the HTML code above -- using just the knowledge I retained from attending the Univ. of Oregon Coding Bootcamp, and
               without referencing the Mozilla Developer Network, or the accompanying README to this HTML file. (I will also use 
               the browser console developer tools (`dev tools` in the comments below) to my advantage.) 
            */

            /* The `Math.random()` method creates a random decimal number between 0 and 1. (Using the dev tools, typing "Math.random()"
               returned the decimal number 0.8561119130518695.) On the next line of the dev tools, typing 0.8561119130518695 * 100
               returns 85.6119130518695. The `Math.floor()` method rounds down the number within its parentheses to the nearest integer,
               which in this case is 85. Then 1 is added to this number at the end of the equation to return 86.
               The random number, 86, generated by the equation is then stored in the variable `randomNumber`. 
            */

            let randomNumber = Math.floor(Math.random() * 100) + 1;

            /* `document.querySelector()` allows you to select an element or a class or an id found in the HTML document. For
               example, `document.querySelector('.guesses');` selects the <p> element above with the class of "guesses". Each 
               selected class selector below is then stored in respective corresponding variables. 
            */

            const guesses = document.querySelector('.guesses');
            const lastResult = document.querySelector('.lastResult');
            const lowOrHi = document.querySelector('.lowOrHi');

            const guessSubmit = document.querySelector('.guessSubmit');
            const guessField = document.querySelector('.guessField');

            /* Here, a `guessCount` variable is created with a value of 1 stored inside it. A 'resetButton' variable is created
               for a future reset button to be created later in the code. And a form input with the id/class of "guessField" is
               made to be "focused", highlighting the form input field so the user knows to input some information within the 
               form input field. 
            */

            let guessCount = 1;
            let resetButton;
            guessField.focus();

            /* Here, a function is created to check the user's guess against the `randomNumber` and record the number of guesses
               the user has made.
            */

            function checkGuess() {

                /* 
                    My memory doesn't recall much about the `Number()` method but I think it converts whatever is in the parentheses
                    into an integer. So here, `guessField.value` is the user's number guess input into the form input field. And then
                    that converted number is stored in the variable `userGuess`.
                    "if" the `guessCount` is exactly equal to the real number 1 (which it is, as `guessCount` has been set to 1), then 
                    the `textContent` in the paragraph <p> with the class "guesses" is filled with the text "Previous guesses: ".
                    The number the user has guessed is then appended to the end of the previously added "Previous guesses: " text, with
                    a space (' ') also added to the end of all previously added text.
                */

                let userGuess = Number(guessField.value);
                if (guessCount === 1) {
                    guesses.textContent = 'Previous guesses: ';
                }
                guesses.textContent += userGuess + ' ';

                /*
                    "if" the user's guess exactly equals the `randomNumber`, then the `textContent` within the paragraph <p> with the
                    class "lastResult" is filled with the text "Congratulations! You got it right!" The background color of that paragraph
                    is changed to a "green" color. The paragraph <p> with the class of "lowOrHi" is filled with an empty string because
                    the user has guessed the correct number and it is not necessary to tell the user if his/her guess is high or low.
                    And then the `setGameOver()` function is called to allow the user to reset the game.
                */

                if (userGuess === randomNumber) {
                    lastResult.textContent = 'Congratulations! You got it right!';
                    lastResult.style.backgroundColor = 'green';
                    lowOrHi.textContent = '';
                    setGameOver();

                /*

                */ 
               
                } else if (guessCount === 10) {
                    lastResult.textContent = '!!!GAME OVER!!!';
                    setGameOver();
                } else {
                    lastResult.textContent = 'Wrong!';
                    lastResult.style.backgroundColor = 'red';
                    if (userGuess < randomNumber) {
                        lowOrHi.textContent = 'Last guess was too low!';
                    } else if (userGuess > randomNumber) {
                        lowOrHi.textContent = 'Last guess was too high!';
                    }
                }

                guessCount++;
                guessField.value = '';
                guessField.focus();
            }

            guessSubmit.addEventListener('click', checkGuess);

            function setGameOver() {
                guessField.disabled = true;
                guessSubmit.disabled = true;
                resetButton = document.createElement('button');
                resetButton.textContent = 'Start new game';
                document.body.append(resetButton);
                resetButton.addEventListener('click', resetGame);
            }

            function resetGame() {
                guessCount = 1;
                const resetParas = document.querySelectorAll('.resultParas p');
                for (let i = 0; i < resetParas.length; i++) {
                    resetParas[i].textContent = '';
                }

                resetButton.parentNode.removeChild(resetButton);

                guessField.disabled = false;
                guessSubmit.disabled = false;
                guessField.value = '';
                guessField.focus();

                lastResult.style.backgroundColor = 'white';

                randomNumber = Math.floor(Math.random() * 100) + 1;
            }
        </script>
    </body>
</html>