<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>String Methods Learning Examples</title>
        <style>
            p {
                color: purple;
                margin: 0.5em 0;
            }

            * {
                box-sizing: border-box;
            }

            h2 {
                margin-left: 15px;
            }

            section[class|=preview] {
                border: 1px solid #828282;
                width: 25%; 
                margin: 15px 0 20px 15px;
                padding: 10px;
            }

            .output-2 {
                margin-left: 15px;
            }
        </style>
    </head>
    <body>

        <h2>Active Learning 1: Printing those products!</h2>

        <section class="preview-1">
            <div class="output-1">
                <ul>

                </ul>

                <p>

                </p>
            </div>
        </section>

        <h2>Active Learning 2: Top 5 searches</h2>

        <div class="output-2" style="min-height: 150px;">
            <input type="text">
            <button>Search</button>
            <ul></ul>
        </div>

    </body>
    <script>

        // *** Active Learning 1 ***

        const list1 = document.querySelector('.output-1 ul');
        const totalBox = document.querySelector('.output-1 p');
        let total = 0;

        const section1 = document.querySelector('.preview-1');
        list1.section1 = '';

        // number 1
        let products = ['Underpants:6.99',
                        'Socks:5.99',
                        'T-shirt:14.99',
                        'Trousers:31.99',
                        'Shoes:23.99'];

        for (let i = 0; i < products.length; i++) { // number 2
            // number 3
            let productsArray = products[i].split(':');
            let name = productsArray[0];
            let price = Number(productsArray[1]);

            // number 4
            
            total += price;

            // number 5
            let itemText = name + ' -- $' + price;

            const listItem = document.createElement('li');
            listItem.textContent = itemText;
            list1.appendChild(listItem);
        }

        totalBox.textContent = 'Total: $' + total.toFixed(2);

        /* To be truthful, some mistakes that I made with the code above: 
           
           1) I missed the instructions to convert the for loop conditional test from `i <= 0` to a conditional test which stops
              the loop when `i` is no longer less than the `products` array's length.
           2) The instructions weren't clear about creating variables in which to store the `split` array items (`name` and `price`).

        */


        // *** Strings Skills Test 2 ***

        const list2 = document.querySelector('.output-2 ul');
        const searchInput = document.querySelector('.output-2 input');
        const searchBtn = document.querySelector('.output-2 button');

        list2.div = '';

        let myHistory = [];

        searchBtn.onclick = function() {
            // we will only allow a term to be entered if the search input isn't empty
            if (searchInput.value !== '') {
                // number 1

                // empty the list so that we don't display duplicate entries
                // the display is regenerated every time a search term is entered.
                list2.div = '';

                // loop through the array, and display all the search terms in the list
                for (let i = 0; i < myHistory.length; i++) {
                    itemText = myHistory[i];
                    const listItem = document.createElement('li');
                    listItem.textContent = itemText;
                    list2.appendChild(listItem);
                }

                // If the array length is 5 or more, remove the oldest search term
                if (myHistory.length >= 5) {
                    // number 2

                }

                // empty the search input and focus it, ready for the next term to be entered
                searchInput.value = '';
                searchInput.focus();
            }
        }

    </script>
</html>